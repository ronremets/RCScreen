#: kivy 1.10.1

<DynamicButton@Button>:
    texture_size: self.width / 2, self.height / 2

<DynamicLabel@Label>:
    texture_size: self.width / 2, self.height / 2

WindowManager:
    MainMenuScreen:
    SettingsScreen:
    HelpScreen:
    FeedbackScreen:
    ConnectScreen:
    ControllerScreen:

<MainMenuScreen>
    name: "main"
    GridLayout:
        size: root.size
        rows: 5
        cols: 1
        padding:
            ((self.width / self.cols) * 0.25,
            (self.height / self.rows) * 0.2)
        spacing: (self.height / self.rows) * 0.2
        DynamicLabel:
            text: "RCScreen"
        DynamicButton:
            text: "Connect"
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "connect"
        DynamicButton:
            text: "Settings"
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "settings"
        DynamicButton:
            text: "Help"
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "help"
        DynamicButton:
            text: "Feedback"
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "feedback"

<HelpScreen>
    name: "help"
    GridLayout:
        size: root.size
        rows: 2
        cols: 1
        padding:
            ((self.width / self.cols) * 0.25,
            (self.height / self.rows) * 0.2)
        spacing: (self.height / self.rows) * 0.2
    
        DynamicLabel:
            text: "help screen"
        DynamicButton:
            text: "Back"
            on_press:
                root.manager.transition.direction = "right"
                app.root.current = "main"

<SettingsScreen>
    name: "settings"
    GridLayout:
        size: root.size
        rows: 2
        cols: 1
        padding:
            ((self.width / self.cols) * 0.25,
            (self.height / self.rows) * 0.2)
        spacing: (self.height / self.rows) * 0.2
    
        DynamicLabel:
            text: "settings screen"
        DynamicButton:
            text: "Back"
            on_press:
                root.manager.transition.direction = "right"
                app.root.current = "main"

<FeedbackScreen>
    name: "feedback"
    GridLayout:
        size: root.size
        rows: 5
        cols: 2
        padding:
            ((self.width / self.cols) * 0.25,
            (self.height / self.rows) * 0.2)
        spacing: (self.height / self.rows) * 0.2
    
        DynamicButton:
            text: "Back"
            on_press:
                root.manager.transition.direction = "right"
                app.root.current = "main"
        Label:
        DynamicLabel:
            text: "Enter Email:"
        TextInput:
        DynamicLabel:
            text: "Enter subject:"
        TextInput:
        DynamicLabel:
            text: "Enter description:"
        TextInput:
        Label:
        DynamicButton:
            text: "Submit"

<ErrorPopup>:
    GridLayout:
        size: root.size
        pos: root.pos
        rows: 3
        cols: 2
        padding:
            ((self.width / self.cols) * 0.25,
            (self.height / self.rows) * 0.2)
        spacing: (self.height / self.rows) * 0.2
    
        DynamicLabel:
            text: "error popup"
        DynamicButton:
            text: "Back"
            on_press:
                self.text = "pressed"

<ConnectScreen>:
    name: "connect"
    controller_checkbox: controller_checkbox
    other_code_text_input: other_code_text_input
    GridLayout:
        size: root.size
        pos: root.pos
        rows: 4
        cols: 2
        padding:
            ((self.width / self.cols) * 0.25,
            (self.height / self.rows) * 0.2)
        spacing: (self.height / self.rows) * 0.2
    
        DynamicLabel:
            text: "Your code: "
        DynamicLabel:
            text: root.manager.code

        DynamicLabel:
            text: "Enter code:"

        TextInput:
            id: other_code_text_input
            text: "0"

        DynamicButton:
            text: "Connect"
            on_press:
                root.manager.other_code = root.other_code_text_input.text
                root.manager.is_controller = root.controller_checkbox.active
                root.manager.transition.direction = "left"
                app.root.current = "controller"
        DynamicButton:
            text: "Back"
            on_press:
                root.manager.transition.direction = "right"
                app.root.current = "main"
        DynamicLabel:
            text: "Controller:"
        CheckBox:
            id: controller_checkbox

<ControllerScreen>
    screen: screen_image
    name: "controller"
    on_enter:
        self.is_controller = root.manager.is_controller
        self.code = root.manager.code
        self.other_code = root.manager.other_code
    Image:
        id: screen_image
        size: root.size
        source: ""
    DynamicButton:
        background_color: 1, 1, 1, 0.5
        size: root.height / 10, root.height / 10
        size_hint: None, None
        pos: 0, root.height - self.height
        text: "Back"
        on_press:
            root.manager.transition.direction = "right"
            app.root.current = "connect"
